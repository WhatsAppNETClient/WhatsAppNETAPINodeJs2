const{addEditContact:addEditContact}=require("../db.repository/contacts.repository"),contactsSet=async t=>{for(const a of Object.values(t.contacts)){const t=createContact(a);if(t)try{await addEditContact(t)}catch(t){console.log(`call addEditContact::ex: ${t}`)}}},contactsUpdate=async t=>{for(const a of t){const t=createContact(a);if(t)try{await addEditContact(t)}catch(t){console.log(`call addEditContact::ex: ${t}`)}}},contactsUpsert=async t=>{for(const a of t){const t=createContact(a);if(t)try{await addEditContact(t)}catch(t){console.log(`call addEditContact::ex: ${t}`)}}},createContact=t=>{const a={id:t.id?t.id:"",name:t.name?t.name:"",pushname:t.notify?t.notify:"",verifiedname:t.verifiedname?t.verifiedname:"",isgroup:t.id.endsWith("@g.us")?1:0};return!a.name&&a.pushname&&(a.name=a.pushname?a.pushname:"",a.pushname=""),a};module.exports={contactsSet:contactsSet,contactsUpdate:contactsUpdate,contactsUpsert:contactsUpsert};